<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5461T457HT"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-5461T457HT');
</script>
<!-- End Google Analytics -->
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="clock">


    <meta name="subtitle" content="Here's liyuhan's personal blog">


    <meta name="description" content="Welcome!">



<title>vue_1 | clock&#39;s blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Clock&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Clock&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">vue_1</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">clock</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">January 28, 2025&nbsp;&nbsp;12:00:00</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="vue3"><a href="#vue3" class="headerlink" title="vue3"></a>vue3</h1><p>Webpack ~ vite</p>
<p>vue3是基于vite创建的</p>
<p>vite 更快一点 </p>
<h2 id="一些准备工作"><a href="#一些准备工作" class="headerlink" title="一些准备工作"></a>一些准备工作</h2><p>准备后如图所示</p>
<p><img src="/../images/image-20250127163451471.png" alt="image-20250127163451471"></p>
<p>插件</p>
<p><img src="/../images/image-20250127163615341.png" alt="image-20250127163615341"></p>
<p><img src="/../images/image-20250127163622050.png" alt="image-20250127163622050"></p>
<p><img src="/../images/image-20250127163640162.png" alt="image-20250127163640162"></p>
<h2 id="Main-ts"><a href="#Main-ts" class="headerlink" title="Main.ts"></a>Main.ts</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 引入createApp用于创建应用</span><br><span class="line">import &#123;createApp&#125; from &#x27;vue&#x27;</span><br><span class="line">// 引入App根组件</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line"></span><br><span class="line">createApp(App).mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>

<p>App 是根组件，createApp是盆</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p>APP.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h1&gt;你好啊！&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27; //组件名</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .app &#123;</span><br><span class="line">    background-color: #ddd;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="简单效果实现"><a href="#简单效果实现" class="headerlink" title="简单效果实现"></a>简单效果实现</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;% raw %&#125;&#123;&#123;name&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;% raw %&#125;&#123;&#123;age&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;查看联系方式&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">    data()&#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        name:&#x27;张三&#x27;,</span><br><span class="line">        age:18,</span><br><span class="line">        tel:&#x27;13888888888&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">      // 修改姓名</span><br><span class="line">      changeName()&#123;</span><br><span class="line">        this.name = &#x27;zhang-san&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      // 修改年龄</span><br><span class="line">      changeAge()&#123;</span><br><span class="line">        this.age += 1</span><br><span class="line">      &#125;,</span><br><span class="line">      // 展示联系方式</span><br><span class="line">      showTel()&#123;</span><br><span class="line">        alert(this.tel)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>这个代码分别是cue组件的三个主要部分，分别对应的模版，脚本和样式</strong></p>
<p>模版部分：也就是trmplate</p>
<h3 id="模版"><a href="#模版" class="headerlink" title="模版"></a>模版</h3><p>模版是vue组件的视图部分，定义了组件的html结构</p>
<p>在vue中。模版部分是通过高{{}}语法实现数据绑定的，{{name}} 会绑定到 data 中的 name 数据。</p>
<p>其中的@click 指令绑定点击事件，点击按钮时执行相应的方法,chageName,changeAge,changeTel</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;% raw %&#125;&#123;&#123;name&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;% raw %&#125;&#123;&#123;age&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;查看联系方式&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="脚本部分"><a href="#脚本部分" class="headerlink" title="脚本部分"></a>脚本部分</h3><p>脚本定义了vue组件的逻辑部分</p>
<ul>
<li><p>data ：组件的状态，即组件中使用的数据</p>
</li>
<li><p>Methods:定义组件的方法，这些方法可以在模版中调用来响应用户事件</p>
</li>
<li><p>name : 组件的名字，这里是’Person’,在vue开发工具中查看到这个组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">    data()&#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        name:&#x27;张三&#x27;,</span><br><span class="line">        age:18,</span><br><span class="line">        tel:&#x27;13888888888&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">      // 修改姓名</span><br><span class="line">      changeName()&#123;</span><br><span class="line">        this.name = &#x27;zhang-san&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      // 修改年龄</span><br><span class="line">      changeAge()&#123;</span><br><span class="line">        this.age += 1</span><br><span class="line">      &#125;,</span><br><span class="line">      // 展示联系方式</span><br><span class="line">      showTel()&#123;</span><br><span class="line">        alert(this.tel)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>这段代码是一个 <strong>Vue 组件</strong> 的脚本部分，使用的是 <strong>TypeScript</strong> 语法。它定义了组件的 <strong>数据</strong>、<strong>方法</strong> 和 <strong>组件的名称</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;Person&#x27;,  这里就是组件的名称</span><br><span class="line">  data() &#123; ... &#125;,</span><br><span class="line">  methods: &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>export default 是一个 <strong>ES6</strong> 模块语法，它表示该文件导出的内容是一个对象，并且该对象是默认导出的。这使得 Vue 在加载组件时可以导入这个对象并使用它来渲染组件</p>
<h3 id="样式部分"><a href="#样式部分" class="headerlink" title="样式部分"></a>样式部分</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>scoped 属性确保这些样式只作用于当前组件，不会影响到其他组件。这是因为 Vue 会为每个组件自动加上独特的属性选择器（如 .person 只作用于当前组件的 .person 元素）。</p>
<p>app.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h1&gt;你好啊！&lt;/h1&gt;</span><br><span class="line">    &lt;Person/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27;, //组件名</span><br><span class="line">    components:&#123;Person&#125; //注册组件</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .app &#123;</span><br><span class="line">    background-color: #ddd;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>Export default{}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  components: &#123; Person &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>export default 语句使得这个对象成为当前模块的默认导出。这意味着在其他地方使用 import 时，就可以导入这个对象。该对象定义了一个 Vue 组件，组件的名字是 App（通过 name: ‘App’ 设置）。App 是这个 Vue 组件的名称，它通常是根组件或父组件的名称。</p>
<p>​	<strong>•	name 属性指定了当前组件的名字。在 Vue 开发工具中，App 组件将显示为 App，它通常是 Vue 应用的根组件。</strong></p>
<p>​	<strong>•	App 组件是父组件，而 Person 组件是它的子组件。</strong></p>
<p>​	<strong>•	components 是一个 Vue 组件选项，表示当前组件所使用的子组件。</strong></p>
<p>​	<strong>•	这里通过 components: { Person } 注册了 Person 组件，意味着在 App 组件的模板中可以使用 &lt;Person  标签来引用 Person 组件。</strong></p>
<p>​	<strong>•	由于我们已经通过 import Person from ‘.&#x2F;components&#x2F;Person.vue’ 导入了 Person 组件，所以在 components 中注册它时，只需要直接写 Person 就可以了。</strong></p>
<h1 id="【OptionsAPI-与-CompositionAPI】"><a href="#【OptionsAPI-与-CompositionAPI】" class="headerlink" title="【OptionsAPI 与 CompositionAPI】"></a>【OptionsAPI 与 CompositionAPI】</h1><h3 id="Options-API-的弊端"><a href="#Options-API-的弊端" class="headerlink" title="Options API 的弊端"></a>Options API 的弊端</h3><p><code>Options</code>类型的 <code>API</code>，数据、方法、计算属性等，是分散在：<code>data</code>、<code>methods</code>、<code>computed</code>中的，若想新增或者修改一个需求，就需要分别修改：<code>data</code>、<code>methods</code>、<code>computed</code>，不便于维护和复用。</p>
<h3 id="Composition-API-的优势"><a href="#Composition-API-的优势" class="headerlink" title="Composition API 的优势"></a>Composition API 的优势</h3><p>可以用函数的方式，更加优雅的组织代码，让相关功能的代码更加有序的组织在一起。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;% raw %&#125;&#123;&#123;name&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;% raw %&#125;&#123;&#123;age&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;查看联系方式&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">    beforeCreate()&#123;</span><br><span class="line">      console.log(&#x27;beforeCreate&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">      console.log(this) //setup中的this是undefined，Vue3在弱化this了</span><br><span class="line">      // 数据，原来是写在data中的，此时的name、age、tel都不是响应式的数据</span><br><span class="line">      let name = &#x27;张三&#x27;</span><br><span class="line">      let age = 18</span><br><span class="line">      let tel = &#x27;13888888888&#x27;</span><br><span class="line">      </span><br><span class="line">      // 方法</span><br><span class="line">      function changeName() &#123;</span><br><span class="line">        name = &#x27;zhang-san&#x27; //注意：这样修改name，页面是没有变化的</span><br><span class="line">        console.log(name) //name确实改了，但name不是响应式的</span><br><span class="line">      &#125;</span><br><span class="line">      function changeAge() &#123;</span><br><span class="line">        age += 1 //注意：这样修改age，页面是没有变化的</span><br><span class="line">        console.log(age) //age确实改了，但age不是响应式的</span><br><span class="line">      &#125;</span><br><span class="line">      function showTel() &#123;</span><br><span class="line">        alert(tel)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // 将数据、方法交出去，模板中才可以使用</span><br><span class="line">      return &#123;name,age,tel,changeName,changeAge,showTel&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>这段代码展示了一个vue3组件的setup()函数的使用，并且展示了一些vue3中的特性</p>
<h2 id="Setup与compositionAPI"><a href="#Setup与compositionAPI" class="headerlink" title="Setup与compositionAPI"></a>Setup与compositionAPI</h2><ul>
<li><p>组件名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;Person&#x27;,</span><br><span class="line">  beforeCreate() &#123;</span><br><span class="line">    console.log(&#x27;beforeCreate&#x27;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></li>
</ul>
<p>​	beforeCreate() 是一个 <strong>生命周期钩子</strong>，它会在 Vue 实例被创建之前调用。这是 Vue 2 和 Vue 3 中都存在的生命周期钩子，但是在 Vue 3 的 <strong>Composition API</strong> 中，生命周期钩子的使用方式发生了变化，通常会使用 onBeforeMount 等新的钩子函数（在 setup() 函数中）。</p>
<ul>
<li><p>setup函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setup() &#123;</span><br><span class="line">  console.log(this) // setup中的this是undefined，Vue3在弱化this了</span><br></pre></td></tr></table></figure></li>
</ul>
<p>​	•	<strong>setup() 函数是 Vue 3 引入的 Composition API 的一部分</strong>，目的是简化组件的状态和行为的管理。</p>
<p>​	•	在 setup() 中，this 是 undefined，这与 Vue 2 中的 this（指向当前组件实例）不同。Vue 3 通过 Composition API 进行了优化，弱化了对 this 的依赖，增强了对组合逻辑的关注。此时，<strong>你应该通过返回的对象来访问数据和方法，而不是通过 this。</strong></p>
<ul>
<li><p>定义数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let name = &#x27;张三&#x27;</span><br><span class="line">let age = 18</span><br><span class="line">let tel = &#x27;13888888888&#x27;</span><br></pre></td></tr></table></figure>


</li>
<li><p>定义方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function changeName() &#123;</span><br><span class="line">  name = &#x27;zhang-san&#x27; // 注意：这样修改name，页面是没有变化的</span><br><span class="line">  console.log(name) // name确实改了，但name不是响应式的</span><br><span class="line">&#125;</span><br><span class="line">function changeAge() &#123;</span><br><span class="line">  age += 1 // 注意：这样修改age，页面是没有变化的</span><br><span class="line">  console.log(age) // age确实改了，但age不是响应式的</span><br><span class="line">&#125;</span><br><span class="line">function showTel() &#123;</span><br><span class="line">  alert(tel)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    c<strong>hangeName()、changeAge() 和 showTel() 是组件的方法</strong>。修改 name 和 age 时，你会发现页面没有发生变化。这是因为 name 和 age 是普通的 JavaScript 变量，而<strong>不是响应式数据</strong>。</p>
<p>​    如果你希望这些数据能够自动反映到模板中，应<strong>该使用 Vue 3 的响应式 API（如 ref() 或 reactive()）。</strong></p>
</li>
<li><p>返回数据与方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return &#123; name, age, tel, changeName, changeAge, showTel &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="setup与optionAPI-xompositionAPI"><a href="#setup与optionAPI-xompositionAPI" class="headerlink" title="setup与optionAPI&amp;xompositionAPI"></a>setup与optionAPI&amp;xompositionAPI</h2><ul>
<li><p>模版部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;% raw %&#125;&#123;&#123;name&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;% raw %&#125;&#123;&#123;age&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;查看联系方式&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;测试1：&#123;% raw %&#125;&#123;&#123;a&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;测试2：&#123;% raw %&#125;&#123;&#123;c&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;测试3：&#123;% raw %&#125;&#123;&#123;d&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;b&quot;&gt;测试&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>​	•	name、age：显示 data 或 setup 中的数据。</p>
<p>​	<strong>•	a、c、d：展示的是通过 data() 中的数据。</strong></p>
<p>​	•	还有一些按钮和方法，如 changeName、changeAge 和 showTel。</p>
<ul>
<li><p>脚本部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">beforeCreate()&#123;</span><br><span class="line">  console.log(&#x27;beforeCreate&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/../images/image-20250127172908590.png" alt="image-20250127172908590"></p>
</li>
</ul>
<p><u>记清楚这个模版</u></p>
<ul>
<li><p>data</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">data()&#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    a: 100,</span><br><span class="line">    c: this.name,  // 这里的 `this.name` 会在 `data` 被调用时是 `undefined`，因为 `name` 在 Vue 3 的 `setup()` 中还没有定义。</span><br><span class="line">    d: 900,</span><br><span class="line">    age: 90</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>methods</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">  b()&#123;</span><br><span class="line">    console.log(&#x27;b&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义了一个方法b,他会在点击按钮时输出b</p>
</li>
<li><p>setup</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">setup()&#123;</span><br><span class="line">  let name = &#x27;张三&#x27;</span><br><span class="line">  let age = 18</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">  function changeName() &#123;</span><br><span class="line">    name = &#x27;zhang-san&#x27;</span><br><span class="line">    console.log(name)</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">    age += 1</span><br><span class="line">    console.log(age)</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel() &#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return &#123;name, age, tel, changeName, changeAge, showTel&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在setup()中，你定义了name, age,tel，他们是普通的javascript 变量，因此他们不是响应式的。修改的时候页面不会刷新</p>
<p>相比较下，我更偏向于上一个写法</p>
<h2 id="setup语法糖"><a href="#setup语法糖" class="headerlink" title="setup语法糖"></a>setup语法糖</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;% raw %&#125;&#123;&#123;name&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;% raw %&#125;&#123;&#123;age&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;地址：&#123;% raw %&#125;&#123;&#123;address&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;查看联系方式&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  // 数据，原来是写在data中的，此时的name、age、tel都不是响应式的数据</span><br><span class="line">  let name = &#x27;张三&#x27;</span><br><span class="line">  let age = 18</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line">  let address = &#x27;北京昌平区宏福苑·宏福科技园&#x27;</span><br><span class="line"></span><br><span class="line">  // 方法</span><br><span class="line">  function changeName() &#123;</span><br><span class="line">    name = &#x27;zhang-san&#x27; //注意：这样修改name，页面是没有变化的</span><br><span class="line">    console.log(name) //name确实改了，但name不是响应式的</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">    age += 1 //注意：这样修改age，页面是没有变化的</span><br><span class="line">    console.log(age) //age确实改了，但age不是响应式的</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel() &#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>重点是分析脚本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  // 数据，原来是写在data中的，此时的name、age、tel都不是响应式的数据</span><br><span class="line">  let name = &#x27;张三&#x27;</span><br><span class="line">  let age = 18</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line">  let address = &#x27;北京昌平区宏福苑·宏福科技园&#x27;</span><br><span class="line"></span><br><span class="line">  // 方法</span><br><span class="line">  function changeName() &#123;</span><br><span class="line">    name = &#x27;zhang-san&#x27; //注意：这样修改name，页面是没有变化的</span><br><span class="line">    console.log(name) //name确实改了，但name不是响应式的</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">    age += 1 //注意：这样修改age，页面是没有变化的</span><br><span class="line">    console.log(age) //age确实改了，但age不是响应式的</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel() &#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  // 数据，原来是写在data中的，此时的name、age、tel都不是响应式的数据</span><br></pre></td></tr></table></figure>

<p>这里发生了改变</p>
<p>​	1.	&lt;script setup**：**</p>
<p>​	•	setup 是 Vue 3 的 Composition API 的新语法。它简化了组件的声明，并且没有 export default，所有的变量和方法都自动暴露给模板。</p>
<p>​	•	name&#x3D;”Person” 是组件的名称，但是在 <script setup> 中并不需要显式定义，可以直接通过文件名推导。</p>
<p>​	2.	<strong>定义的变量：</strong></p>
<p>​	•	let name = &#39;张三&#39;，let age = 18，let tel = &#39;13888888888&#39;，let address = &#39;北京昌平区宏福苑·宏福科技园&#39;：这些变量是普通的 JavaScript 变量，它们 <strong>不是响应式的</strong>。如果你修改这些变量，视图不会自动更新。</p>
<p>​	3.	<strong>修改数据的函数：</strong></p>
<p>​	•	changeName 和 changeAge 中直接修改了 name 和 age，但是由于没有使用 Vue 的响应式 API，页面不会随着这些变量的变化而自动重新渲染。</p>
<p>​	•	这是一个问题，因为 Vue 3 中的响应式系统（通过 ref 或 reactive）才能让数据变化时自动更新视图。</p>
<h1 id="ref创建"><a href="#ref创建" class="headerlink" title="ref创建"></a>ref创建</h1><p>哪一个是响应式的，就改变哪一个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;% raw %&#125;&#123;&#123;name&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;% raw %&#125;&#123;&#123;age&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;地址：&#123;% raw %&#125;&#123;&#123;address&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;查看联系方式&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 数据，原来是写在data中的，此时的name、age、tel都不是响应式的数据</span><br><span class="line">  let name = ref(&#x27;张三&#x27;)</span><br><span class="line">  let age = ref(18)</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line">  let address = &#x27;北京昌平区宏福苑·宏福科技园&#x27;</span><br><span class="line"></span><br><span class="line">  // 方法</span><br><span class="line">  function changeName() &#123;</span><br><span class="line">    name.value = &#x27;zhang-san&#x27; // JS中操作ref对象时候需要.value</span><br><span class="line">    console.log(name.value) </span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">    age.value += 1 </span><br><span class="line">    console.log(age.value) // JS中操作ref对象时候需要.value</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel() &#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>这段代码已经解决了你之前提到的 <strong>响应式数据</strong> 问题，通过使用 ref 将 name 和 age 变成了响应式变量，确保它们的变化能够自动更新到视图中。让我们来逐部分解释这个代码：</p>
<p><strong>ref()用于创建单一响应式数据，而reactive()用于创建对象的响应式数据</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  // 使用 ref() 创建响应式数据</span><br><span class="line">  let name = ref(&#x27;张三&#x27;);</span><br><span class="line">  let age = ref(18);</span><br><span class="line">  let tel = ref(&#x27;13888888888&#x27;);</span><br><span class="line">  let address = ref(&#x27;北京昌平区宏福苑·宏福科技园&#x27;);</span><br><span class="line"></span><br><span class="line">  // 方法</span><br><span class="line">  function changeName() &#123;</span><br><span class="line">    name.value = &#x27;zhang-san&#x27;; // 修改时需要通过 `.value` 访问和修改 ref 数据</span><br><span class="line">    console.log(name.value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">    age.value += 1;</span><br><span class="line">    console.log(age.value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function showTel() &#123;</span><br><span class="line">    alert(tel.value);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h1 id="Reactive-对象类型"><a href="#Reactive-对象类型" class="headerlink" title="Reactive-对象类型"></a>Reactive-对象类型</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;汽车信息：一辆&#123;% raw %&#125;&#123;&#123;car.brand&#125;&#125;&#123;% endraw %&#125;车，价值&#123;% raw %&#125;&#123;&#123;car.price&#125;&#125;&#123;% endraw %&#125;万&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changePrice&quot;&gt;修改汽车的价格&lt;/button&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;h2&gt;游戏列表：&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;% raw %&#125;&#123;&#123;g.name&#125;&#125;&#123;% endraw %&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFirstGame&quot;&gt;修改第一个游戏的名字&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;测试：&#123;% raw %&#125;&#123;&#123;obj.a.b.c&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeObj&quot;&gt;测试&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 定义数据类型</span><br><span class="line">  type Car = &#123;</span><br><span class="line">    brand: string;</span><br><span class="line">    price: number;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  type Game = &#123;</span><br><span class="line">    id: string;</span><br><span class="line">    name: string;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  type Obj = &#123;</span><br><span class="line">    a: &#123;</span><br><span class="line">      b: &#123;</span><br><span class="line">        c: number;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 响应式数据</span><br><span class="line">  let car = reactive&lt;Car&gt;(&#123; brand: &#x27;奔驰&#x27;, price: 100 &#125;)</span><br><span class="line">  let games = reactive&lt;Game[]&gt;([</span><br><span class="line">    &#123; id: &#x27;aysdytfsatr01&#x27;, name: &#x27;王者荣耀&#x27; &#125;,</span><br><span class="line">    &#123; id: &#x27;aysdytfsatr02&#x27;, name: &#x27;原神&#x27; &#125;,</span><br><span class="line">    &#123; id: &#x27;aysdytfsatr03&#x27;, name: &#x27;三国志&#x27; &#125;</span><br><span class="line">  ])</span><br><span class="line">  let obj = reactive&lt;Obj&gt;(&#123;</span><br><span class="line">    a: &#123;</span><br><span class="line">      b: &#123;</span><br><span class="line">        c: 666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // 方法</span><br><span class="line">  function changePrice() &#123;</span><br><span class="line">    car.price += 10</span><br><span class="line">    console.log(car.price)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function changeFirstGame() &#123;</span><br><span class="line">    games[0].name = &#x27;流星蝴蝶剑&#x27;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function changeObj() &#123;</span><br><span class="line">    obj.a.b.c = 999</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>何时使用 reactive：</strong></p>
<p>​	1.	<strong>对象和数组的响应式数据</strong>：</p>
<p>​	•	reactive 主要用于对象和数组类型的响应式处理。因为它会深度递归地将对象的每一个属性都变成响应式的。</p>
<p>​	•	如果你想让一个复杂的对象（例如包含嵌套对象或数组的对象）自动反应数据变化并更新视图时，就应该使用 reactive。</p>
<p>​	2.	<strong>对象需要嵌套响应式</strong>：</p>
<p>​	•	如果你有多层嵌套的数据结构，并且想要使所有的嵌套属性都成为响应式的，reactive 是非常合适的。比如，一个对象内部有数组，数组内部又有对象等。</p>
<p>​	3.	<strong>非原始数据类型</strong>：</p>
<p>​	•	reactive 适用于对象和数组，但不适用于原始类型（例如：number、string、boolean）。如果你只需要处理一个原始数据类型，可以使用 ref。</p>
<p>​	4.	<strong>复杂的数据结构</strong>：</p>
<p>​	•	当你有一个比较复杂的对象，且其中可能包含许多不同类型的属性，reactive 能够方便地使这些属性变得响应式，避免手动为每个属性都使用 ref 或者其他方法来设置响应式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;% raw %&#125;&#123;&#123; person.name &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;% raw %&#125;&#123;&#123; person.age &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;地址：&#123;% raw %&#125;&#123;&#123; person.address &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;查看联系方式&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 使用 reactive 来定义响应式对象</span><br><span class="line">  const person = reactive(&#123;</span><br><span class="line">    name: &#x27;张三&#x27;,</span><br><span class="line">    age: 18,</span><br><span class="line">    tel: &#x27;13888888888&#x27;,</span><br><span class="line">    address: &#x27;北京昌平区宏福苑·宏福科技园&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // 修改姓名</span><br><span class="line">  function changeName() &#123;</span><br><span class="line">    person.name = &#x27;zhang-san&#x27;</span><br><span class="line">    console.log(person.name) </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 修改年龄</span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">    person.age += 1 </span><br><span class="line">    console.log(person.age) </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 展示联系方式</span><br><span class="line">  function showTel() &#123;</span><br><span class="line">    alert(person.tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/../images/image-20250127210920434.png" alt="image-20250127210920434"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;汽车信息：一辆&#123;% raw %&#125;&#123;&#123;car.brand&#125;&#125;&#123;% endraw %&#125;车，价值&#123;% raw %&#125;&#123;&#123;car.price&#125;&#125;&#123;% endraw %&#125;万&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeBrand&quot;&gt;修改汽车的品牌&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePrice&quot;&gt;修改汽车的价格&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;修改汽车&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;当前求和为：&#123;% raw %&#125;&#123;&#123;sum&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;点我sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,reactive&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 数据</span><br><span class="line">  let car = reactive(&#123;brand:&#x27;奔驰&#x27;,price:100&#125;)</span><br><span class="line">  let sum = ref(0)</span><br><span class="line"></span><br><span class="line">  // 方法</span><br><span class="line">  function changeBrand()&#123;</span><br><span class="line">    car.brand = &#x27;宝马&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changePrice()&#123;</span><br><span class="line">    car.price += 10</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    // car = &#123;brand:&#x27;奥拓&#x27;,price:1&#125; //这么写页面不更新的</span><br><span class="line">    // car = reactive(&#123;brand:&#x27;奥拓&#x27;,price:1&#125;) //这么写页面不更新的</span><br><span class="line"></span><br><span class="line">    // 下面这个写法页面可以更新</span><br><span class="line">    Object.assign(car,&#123;brand:&#x27;奥拓&#x27;,price:1&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  function changeSum()&#123;</span><br><span class="line">    // sum = ref(9) //这么写页面不更新的</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 修改汽车（对象赋值的问题）</span><br><span class="line">function changeCar() &#123;</span><br><span class="line">  // 通过 Object.assign 保持响应式</span><br><span class="line">  Object.assign(car, &#123; brand: &#x27;奥拓&#x27;, price: 1 &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这里是重点</p>
<h1 id="Torefs-toref"><a href="#Torefs-toref" class="headerlink" title="Torefs &amp;&amp; toref"></a>Torefs &amp;&amp; toref</h1><p><img src="/../images/image-20250127213249475.png" alt="image-20250127213249475"></p>
<p><img src="/../images/image-20250127213325812.png" alt="image-20250127213325812"></p>
<p>类似于解构</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;% raw %&#125;&#123;&#123;person.name&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;% raw %&#125;&#123;&#123;person.age&#125;&#125;&#123;% endraw %&#125;，&#123;% raw %&#125;&#123;&#123;nl&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,toRefs,toRef&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 数据</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;张三&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // 使用toRefs从person这个响应式对象中，解构出name、age，且name和age依然是响应式的</span><br><span class="line">  // name和age的值是ref类型，其value值指向的是person.name和person.age</span><br><span class="line">  let &#123;name,age&#125; = toRefs(person)</span><br><span class="line">  let nl = toRef(person,&#x27;age&#x27;)</span><br><span class="line">  </span><br><span class="line">  console.log(nl.value)</span><br><span class="line"></span><br><span class="line">  // 方法</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    name.value += &#x27;~&#x27;</span><br><span class="line">    console.log(name.value,person.name)</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    age.value += 1</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>1. reactive 和 toRefs 的使用：</strong></p>
<p>​	•	reactive：用于创建响应式对象。你使用 reactive 来创建 person 对象，该对象包含 name 和 age。</p>
<p>​	<strong>•	toRefs：<strong>将 reactive 对象的属性解构出来，变成单独的响应式 ref</strong>。你通过 toRefs(person) 将 person 对象中的 name 和 age 分别解构为 ref 类型的响应式数据。这样，name 和 age 的每个属性都保持响应式。</strong>**</p>
<p>​	<strong>•	toRef：用来将对象的特定属性转换为 ref。你通过 toRef(person, &#39;age&#39;) 将 person 对象的 age 属性变成一个 ref 类型。</strong></p>
<p><strong>2. changeName 和 changeAge 方法：</strong></p>
<p>​	•	changeName：修改 name 的值，通过 name.value 更新。由于 name 是通过 toRefs 解构出来的，它依然是响应式的，因此当修改 name.value 时，视图会自动更新。</p>
<p>​	•	changeAge：同样修改 age 的值，<strong>age 也是一个 ref 类型，通过 age.value 来更新</strong>。</p>
<h1 id="computed计算属性"><a href="#computed计算属性" class="headerlink" title="computed计算属性"></a>computed计算属性</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    姓：&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;br&gt;</span><br><span class="line">    名：&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot;&gt; &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFullName&quot;&gt;将全名改为li-si&lt;/button&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;% raw %&#125;&#123;&#123;fullName&#125;&#125;&#123;% endraw %&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;% raw %&#125;&#123;&#123;fullName&#125;&#125;&#123;% endraw %&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;% raw %&#125;&#123;&#123;fullName&#125;&#125;&#123;% endraw %&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;% raw %&#125;&#123;&#123;fullName&#125;&#125;&#123;% endraw %&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;% raw %&#125;&#123;&#123;fullName&#125;&#125;&#123;% endraw %&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;% raw %&#125;&#123;&#123;fullName&#125;&#125;&#123;% endraw %&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,computed&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let firstName = ref(&#x27;zhang&#x27;)</span><br><span class="line">  let lastName = ref(&#x27;san&#x27;)</span><br><span class="line"></span><br><span class="line">  // fullName是一个计算属性，且是只读的</span><br><span class="line">  /* let fullName = computed(()=&gt;&#123;</span><br><span class="line">    console.log(1)</span><br><span class="line">    return firstName.value.slice(0,1).toUpperCase() + firstName.value.slice(1) + &#x27;-&#x27; + lastName.value</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line">  // fullName是一个计算属性，可读可写</span><br><span class="line">  let fullName = computed(&#123;</span><br><span class="line">    // 当fullName被读取时，get调用</span><br><span class="line">    get()&#123;</span><br><span class="line">      return firstName.value.slice(0,1).toUpperCase() + firstName.value.slice(1) + &#x27;-&#x27; + lastName.value</span><br><span class="line">    &#125;,</span><br><span class="line">    // 当fullName被修改时，set调用，且会收到修改的值</span><br><span class="line">    set(val)&#123;</span><br><span class="line">      const [str1,str2] = val.split(&#x27;-&#x27;)</span><br><span class="line">      firstName.value = str1</span><br><span class="line">      lastName.value = str2</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  function changeFullName()&#123;</span><br><span class="line">    fullName.value = &#x27;li-si&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>在这里面有一个计算属性，她的作用是<strong>基于已有的响应式数据计算新的值，计算属性的返回值会自动缓存，只有当它依赖的数据发生变化时，才会重新计算。</strong></p>
<p><strong>计算属性是只读的，也可以是可读可导的</strong></p>
<p>现在展开对代码进行讲解</p>
<ul>
<li><p>模版部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    姓：&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;br&gt;</span><br><span class="line">    名：&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot;&gt; &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFullName&quot;&gt;将全名改为li-si&lt;/button&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;% raw %&#125;&#123;&#123;fullName&#125;&#125;&#123;% endraw %&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;% raw %&#125;&#123;&#123;fullName&#125;&#125;&#123;% endraw %&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;% raw %&#125;&#123;&#123;fullName&#125;&#125;&#123;% endraw %&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;% raw %&#125;&#123;&#123;fullName&#125;&#125;&#123;% endraw %&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;% raw %&#125;&#123;&#123;fullName&#125;&#125;&#123;% endraw %&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;% raw %&#125;&#123;&#123;fullName&#125;&#125;&#123;% endraw %&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>其中那么多全名是为了对齐进行测试</p>
</li>
<li><p>脚本部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,computed&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let firstName = ref(&#x27;zhang&#x27;)</span><br><span class="line">  let lastName = ref(&#x27;san&#x27;)</span><br><span class="line"></span><br><span class="line">  // fullName是一个计算属性，且是可读可写的</span><br><span class="line">  let fullName = computed(&#123;</span><br><span class="line">    // 当fullName被读取时，get调用</span><br><span class="line">    get()&#123;</span><br><span class="line">      return firstName.value.slice(0,1).toUpperCase() + firstName.value.slice(1) + &#x27;-&#x27; + lastName.value</span><br><span class="line">    &#125;,</span><br><span class="line">    // 当fullName被修改时，set调用，且会收到修改的值</span><br><span class="line">    set(val)&#123;</span><br><span class="line">      const [str1,str2] = val.split(&#x27;-&#x27;)</span><br><span class="line">      firstName.value = str1</span><br><span class="line">      lastName.value = str2</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  function changeFullName()&#123;</span><br><span class="line">    fullName.value = &#x27;li-si&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="只读"><a href="#只读" class="headerlink" title="只读"></a>只读</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// fullName是一个计算属性，且是只读的</span><br><span class="line">/* let fullName = computed(()=&gt;&#123;</span><br><span class="line">  console.log(1)</span><br><span class="line">  return firstName.value.slice(0,1).toUpperCase() + firstName.value.slice(1) + &#x27;-&#x27; + lastName.value</span><br><span class="line">&#125;) */</span><br></pre></td></tr></table></figure>

<h4 id="可读可写"><a href="#可读可写" class="headerlink" title="可读可写"></a>可读可写</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// fullName是一个计算属性，可读可写</span><br><span class="line">  let fullName = computed(&#123;</span><br><span class="line">    // 当fullName被读取时，get调用</span><br><span class="line">    get()&#123;</span><br><span class="line">      return firstName.value.slice(0,1).toUpperCase() + firstName.value.slice(1) + &#x27;-&#x27; + lastName.value</span><br><span class="line">    &#125;,</span><br><span class="line">    // 当fullName被修改时，set调用，且会收到修改的值</span><br><span class="line">    set(val)&#123;</span><br><span class="line">      const [str1,str2] = val.split(&#x27;-&#x27;)</span><br><span class="line">      firstName.value = str1</span><br><span class="line">      lastName.value = str2</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>​	2.	computed**：**</p>
<p>​	•	computed 是 Vue 3 中的 <strong>计算属性</strong>，它会根据其他响应式数据的变化动态计算一个值，并且当相关数据改变时，计算属性会自动更新。</p>
<p>​	•	fullName 是一个 <strong>可读可写的计算属性</strong>，通过 get 和 set 方法来控制：</p>
<p>​	•	get()：当 fullName 被读取时，它会拼接 firstName 和 lastName，并且确保 firstName 的首字母大写。</p>
<p>​	•	set(val)：当 fullName 被修改时，set 会接收到新的值，并将其拆分为 firstName 和 lastName，更新这两个响应式变量。</p>
<p>​	<strong>3.	changeFullName 方法：</strong></p>
<p>​	<strong>•	当点击按钮时，会调用 changeFullName 方法，并设置 fullName 的值为 &#39;li-si&#39;。由于 fullName 是计算属性，这会触发 set 方法，从而更新 firstName 和 lastName 的值为 &#39;li&#39; 和 &#39;si&#39;。</strong></p>
<h1 id="watch监视"><a href="#watch监视" class="headerlink" title="watch监视"></a>watch监视</h1><p><img src="/../images/image-20250127215508527.png" alt="image-20250127215508527"></p>
<h2 id="情况一"><a href="#情况一" class="headerlink" title="情况一"></a>情况一</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况一：监视【ref】定义的【基本类型】数据&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;当前求和为：&#123;% raw %&#125;&#123;&#123;sum&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;点我sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // 数据</span><br><span class="line">  let sum = ref(0)</span><br><span class="line">  // 方法</span><br><span class="line">  function changeSum()&#123;</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  // 监视，情况一：监视【ref】定义的【基本类型】数据</span><br><span class="line">  const stopWatch = watch(sum,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;sum变化了&#x27;,newValue,oldValue)</span><br><span class="line">    if(newValue &gt;= 10)&#123;</span><br><span class="line">      stopWatch()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 数据</span><br><span class="line">  let sum = ref(0)</span><br><span class="line"></span><br><span class="line">  // 方法</span><br><span class="line">  function changeSum() &#123;</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 监视，情况一：监视【ref】定义的【基本类型】数据</span><br><span class="line">  const stopWatch = watch(sum, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;sum变化了&#x27;, newValue, oldValue)</span><br><span class="line">    if (newValue &gt;= 10) &#123;</span><br><span class="line">      stopWatch() // 停止监听</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>watch的基本语法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch(source, callback, options)</span><br></pre></td></tr></table></figure>

<p>•	<strong>source</strong>：要监视的数据源（可以是一个响应式对象、ref 等）。</p>
<p>​	•	<strong>callback</strong>：数据变化时调用的回调函数，它会接收到新值和旧值。</p>
<p>​	•	<strong>options</strong>：可选参数，允许你配置 watch 的行为。</p>
<p>在你的例子中，watch 监视了 sum 的变化，每当 sum 发生变化时，回调函数就会执行，打印出新旧值。如果新值大于或等于 10，就停止监视。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况二：监视【ref】定义的【对象类型】数据&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;% raw %&#125;&#123;&#123; person.name &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;% raw %&#125;&#123;&#123; person.age &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;修改整个人&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // 数据</span><br><span class="line">  let person = ref(&#123;</span><br><span class="line">    name:&#x27;张三&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line">  // 方法</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.value.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.value.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson()&#123;</span><br><span class="line">    person.value = &#123;name:&#x27;李四&#x27;,age:90&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  /* </span><br><span class="line">    监视，情况一：监视【ref】定义的【对象类型】数据，监视的是对象的地址值，若想监视对象内部属性的变化，需要手动开启深度监视</span><br><span class="line">    watch的第一个参数是：被监视的数据</span><br><span class="line">    watch的第二个参数是：监视的回调</span><br><span class="line">    watch的第三个参数是：配置对象（deep、immediate等等.....） </span><br><span class="line">  */</span><br><span class="line">  watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>​	<strong>2.	watch 监视对象变化：</strong></p>
<p>​	<strong>•	watch 是 Vue 3 提供的 API，用来监听响应式数据（如 ref 或 reactive）的变化。当监视的数据变化时，watch 的回调函数会被触发。</strong></p>
<p><strong>你在代码中通过 watch(person, ...) 来监听 person 对象的变化。watch 会接收到两个参数：</strong></p>
<p>​	<strong>•	newValue：person 变化后的新值。</strong></p>
<p>​	<strong>•	oldValue：person 变化前的旧值。</strong></p>
<p>​	<strong>•	deep: true：由于 watch 默认只监视对象的引用变化，如果你需要监视对象内部属性的变化（即对象内部的数据变化），需要设置 { deep: true }，这样 Vue 会递归地监视对象内部的每个属性变化。</strong></p>
<p>​	<strong>•	深度监视：</strong></p>
<p>​	<strong>•	deep 是 watch 的一个选项，它使得 Vue 能够监听 对象属性的变化。当对象的嵌套属性发生变化时，watch 的回调也会被触发。</strong></p>
<p>​	<strong>•	如果没有开启深度监视，那么只有对象的引用变化（如直接替换整个对象）才会触发回调。如果只是修改对象的某个属性，默认不会触发回调。</strong></p>
<p>​	<strong>3.	person.value = { name: &#39;李四&#39;, age: 90 }：</strong></p>
<p>​	<strong>•	在 changePerson 方法中，直接给 person 赋值一个新的对象，这会改变 person 的引用，从而触发 watch 监听的回调。</strong></p>
<h3 id="情况3"><a href="#情况3" class="headerlink" title="情况3"></a>情况3</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况三：监视【reactive】定义的【对象类型】数据&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;% raw %&#125;&#123;&#123; person.name &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;% raw %&#125;&#123;&#123; person.age &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;修改整个人&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;测试：&#123;% raw %&#125;&#123;&#123;obj.a.b.c&#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;修改obj.a.b.c&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // 数据</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;张三&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line">  let obj = reactive(&#123;</span><br><span class="line">    a:&#123;</span><br><span class="line">      b:&#123;</span><br><span class="line">        c:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // 方法</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson()&#123;</span><br><span class="line">    Object.assign(person,&#123;name:&#x27;李四&#x27;,age:80&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  function test()&#123;</span><br><span class="line">    obj.a.b.c = 888</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 监视，情况三：监视【reactive】定义的【对象类型】数据，且默认是开启深度监视的</span><br><span class="line">  watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;)</span><br><span class="line">  watch(obj,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;Obj变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="情况四"><a href="#情况四" class="headerlink" title="情况四"></a>情况四</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况四：监视【ref】或【reactive】定义的【对象类型】数据中的某个属性&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;% raw %&#125;&#123;&#123; person.name &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;% raw %&#125;&#123;&#123; person.age &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;汽车：&#123;% raw %&#125;&#123;&#123; person.car.c1 &#125;&#125;&#123;% endraw %&#125;、&#123;% raw %&#125;&#123;&#123; person.car.c2 &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;修改第一台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;修改第二台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;修改整个车&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 数据</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;张三&#x27;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">      c1:&#x27;奔驰&#x27;,</span><br><span class="line">      c2:&#x27;宝马&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // 方法</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC1()&#123;</span><br><span class="line">    person.car.c1 = &#x27;奥迪&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC2()&#123;</span><br><span class="line">    person.car.c2 = &#x27;大众&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    person.car = &#123;c1:&#x27;雅迪&#x27;,c2:&#x27;爱玛&#x27;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 监视，情况四：监视响应式对象中的某个属性，且该属性是基本类型的，要写成函数式</span><br><span class="line">  /* watch(()=&gt; person.name,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.name变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line">  // 监视，情况四：监视响应式对象中的某个属性，且该属性是对象类型的，可以直接写，也能写函数，更推荐写函数</span><br><span class="line">  watch(()=&gt;person.car,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.car变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">watch(() =&gt; person.car, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;person.car变化了&#x27;, newValue, oldValue)</span><br><span class="line">&#125;, &#123; deep: true &#125;)</span><br></pre></td></tr></table></figure>

<p>•	deep: true：由于 person.car 是一个对象，默认情况下，watch 只会监听对象的引用变化。如果你想监听对象内部的嵌套属性（如 c1 和 c2）的变化，需要设置 { deep: true }，这会开启深度监视。</p>
<p>​	•	在 <strong>深度监视</strong> 下，watch 不仅会监视 person.car 的引用变化，还会监视 person.car.c1 和 person.car.c2 的变化。</p>
<p><strong>这是对象类型的写法</strong></p>
<h3 id="情况5-监视多个事件"><a href="#情况5-监视多个事件" class="headerlink" title="情况5-监视多个事件"></a>情况5-监视多个事件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况五：监视上述的多个数据&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;% raw %&#125;&#123;&#123; person.name &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;% raw %&#125;&#123;&#123; person.age &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;汽车：&#123;% raw %&#125;&#123;&#123; person.car.c1 &#125;&#125;&#123;% endraw %&#125;、&#123;% raw %&#125;&#123;&#123; person.car.c2 &#125;&#125;&#123;% endraw %&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;修改第一台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;修改第二台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;修改整个车&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 数据</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;张三&#x27;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">      c1:&#x27;奔驰&#x27;,</span><br><span class="line">      c2:&#x27;宝马&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // 方法</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC1()&#123;</span><br><span class="line">    person.car.c1 = &#x27;奥迪&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC2()&#123;</span><br><span class="line">    person.car.c2 = &#x27;大众&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    person.car = &#123;c1:&#x27;雅迪&#x27;,c2:&#x27;爱玛&#x27;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 监视，情况五：监视上述的多个数据</span><br><span class="line">  watch([()=&gt;person.name,person.car],(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.car变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 监视，情况五：监视上述的多个数据</span><br><span class="line">watch([()=&gt;person.name,person.car],(newValue,oldValue)=&gt;&#123;</span><br><span class="line">  console.log(&#x27;person.car变化了&#x27;,newValue,oldValue)</span><br><span class="line">&#125;,&#123;deep:true&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>就是加了个中括号</p>
<h2 id="watch-effect"><a href="#watch-effect" class="headerlink" title="watch- effect"></a>watch- effect</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;需求：当水温达到60度，或水位达到80cm时，给服务器发请求&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;当前水温：&#123;% raw %&#125;&#123;&#123;temp&#125;&#125;&#123;% endraw %&#125;℃&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;当前水位：&#123;% raw %&#125;&#123;&#123;height&#125;&#125;&#123;% endraw %&#125;cm&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeTemp&quot;&gt;水温+10&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeHeight&quot;&gt;水位+10&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch,watchEffect&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 数据</span><br><span class="line">  let temp = ref(10)</span><br><span class="line">  let height = ref(0)</span><br><span class="line"></span><br><span class="line">  // 方法</span><br><span class="line">  function changeTemp()&#123;</span><br><span class="line">    temp.value += 10</span><br><span class="line">  &#125;</span><br><span class="line">  function changeHeight()&#123;</span><br><span class="line">    height.value += 10</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 监视 -- watch实现</span><br><span class="line">  /* watch([temp,height],(value)=&gt;&#123;</span><br><span class="line">    // 从value中获取最新的水温(newTemp)、最新的水位(newHeight)</span><br><span class="line">    let [newTemp,newHeight] = value</span><br><span class="line">    // 逻辑</span><br><span class="line">    if(newTemp &gt;= 60 || newHeight &gt;= 80)&#123;</span><br><span class="line">      console.log(&#x27;给服务器发请求&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line">  // 监视 -- watchEffect实现</span><br><span class="line">  watchEffect(()=&gt;&#123;</span><br><span class="line">    if(temp.value &gt;= 60 || height.value &gt;= 80)&#123;</span><br><span class="line">      console.log(&#x27;给服务器发请求&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>详细讲解：</strong></p>
<p><strong>watch 的用法：</strong></p>
<p>​	•	watch 是 Vue 3 中的一个 API，用于监视一个或多个响应式数据。当监视的数据发生变化时，watch 会触发回调函数，并将最新的值传递给回调函数。</p>
<p>​	•	watch([temp, height], (value) =&gt; {...})：</p>
<p>​	•	temp 和 height 是你监视的两个数据源。</p>
<p>​	•	当这两个数据发生变化时，watch 会调用回调函数 (value)。</p>
<p>​	•	value 是一个数组，包含了 temp 和 height 的新值。<strong>注意</strong>：这两个值的顺序与传入 watch 时的顺序一致，value[0] 是 temp 的新值，value[1] 是 height 的新值。</p>
<p><strong>回调函数：</strong></p>
<p>​	•	value：</p>
<p>​	•	value 是一个数组，包含了所有被监视的数据的新值。在这个例子中，value 是 [newTemp, newHeight]。</p>
<p>​	•	通过解构赋值 let [newTemp, newHeight] = value，可以直接获取 temp 和 height 的新值。</p>
<p>​	•	<strong>条件判断：</strong></p>
<p>​	•	如果 newTemp（水温）大于等于 60，或者 newHeight（水位）大于等于 80，就执行 console.log(&#39;给服务器发请求&#39;)。</p>
<p>​	•	这段逻辑可以用于监测水温或水位达到某个阈值时，触发某些操作（例如，发送请求给服务器）。</p>
<h2 id="标签属性"><a href="#标签属性" class="headerlink" title="标签属性"></a>标签属性</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;中国&lt;/h1&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title2&quot;&gt;北京&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;尚硅谷&lt;/h3&gt;</span><br><span class="line">    &lt;button @click=&quot;showLog&quot;&gt;点我输出h2这个元素&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,defineExpose&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // 创建一个title2，用于存储ref标记的内容</span><br><span class="line">  let title2 = ref()</span><br><span class="line">  let a = ref(0)</span><br><span class="line">  let b = ref(1)</span><br><span class="line">  let c = ref(2)</span><br><span class="line"></span><br><span class="line">  function showLog()&#123;</span><br><span class="line">    console.log(title2.value)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  defineExpose(&#123;a,b,c&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h1 id="TS"><a href="#TS" class="headerlink" title="TS"></a>TS</h1><p>index.ts</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 定义一个接口，用于限制person对象的具体属性</span><br><span class="line">export interface PersonInter &#123;</span><br><span class="line">  id:string,</span><br><span class="line">  name:string,</span><br><span class="line">  age:number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 一个自定义类型</span><br><span class="line">// export type Persons = Array&lt;PersonInter&gt;</span><br><span class="line">export type Persons = PersonInter[]</span><br></pre></td></tr></table></figure>

<p>interface 定义接口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export interface PersonInter &#123;</span><br><span class="line">  id: string,</span><br><span class="line">  name: string,</span><br><span class="line">  age: number</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>interface :接口用于定义对象的结构与约束</p>
<p>在这里：PersonInter是一个接口，约束了一个person对象必须具有的属性</p>
<p>​	•	id：类型为 string，表示唯一标识符。</p>
<p>​	•	name：类型为 string，表示人员的姓名。</p>
<p>​	•	age：类型为 number，表示人员的年龄。</p>
<p>​	•	type：类型别名可以用来给复杂的类型（如数组、联合类型等）取一个简短的名字。</p>
<p>​	•	Persons：类型别名定义为一个 PersonInter 对象数组（即 PersonInter[]），表示一个由多个 person 对象组成的列表。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;type PersonInter,type Persons&#125; from &#x27;@/types&#x27;</span><br><span class="line"></span><br><span class="line">  // let person:PersonInter = &#123;id:&#x27;asyud7asfd01&#x27;,name:&#x27;张三&#x27;,age:60&#125;</span><br><span class="line"></span><br><span class="line">  let personList:Persons = [</span><br><span class="line">    &#123;id:&#x27;asyud7asfd01&#x27;,name:&#x27;张三&#x27;,age:60&#125;,</span><br><span class="line">    &#123;id:&#x27;asyud7asfd02&#x27;,name:&#x27;李四&#x27;,age:18&#125;,</span><br><span class="line">    &#123;id:&#x27;asyud7asfd03&#x27;,name:&#x27;王五&#x27;,age:5&#125;</span><br><span class="line">  ]</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>​	•	import { type ... }：</p>
<p>​	•	type 是 TypeScript 的关键字，用来导入类型信息。它能明确表明这是一个类型导入，而不是普通值。</p>
<p>​	•	从 @/types 文件中导入了两个类型：PersonInter 和 Persons。</p>
<p>​	•	@/types：</p>
<p>​	•	表示一个类型定义文件的路径。一般情况下，这个文件夹是项目中专门用来存放全局类型定义的。</p>
<p>​	•	在这个 types 文件中，定义了以下内容（假设内容如下）：</p>
<p>​	•	let personList: Persons：</p>
<p>​	•	通过 :Persons 明确指定了 personList 的类型是 Persons。</p>
<p>​	•	Persons 的定义是 PersonInter[]，即一个数组，数组的每个元素都必须符合 PersonInter 接口的结构。</p>
<p>​	•	personList <strong>的用途：</strong></p>
<p>​	•	personList 是一个数组，其中存储了多个 person 对象。</p>
<p>​	•	每个对象必须具有 id（字符串）、name（字符串）和 age（数字）属性，否则 TypeScript 会抛出类型错误。</p>
<p>​	•	<strong>数据校验示例</strong>：</p>
<p>​	•	如果你尝试添加一个不符合 PersonInter 结构的对象，比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let personList: Persons = [</span><br><span class="line">  &#123; id: &#x27;asyud7asfd04&#x27;, name: &#x27;赵六&#x27; &#125; // 缺少 age 属性</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><img src="/../images/image-20250128002108189.png" alt="image-20250128002108189"></p>
<p><img src="/../images/image-20250128002115128.png" alt="image-20250128002115128"></p>
<h1 id="props的使用"><a href="#props的使用" class="headerlink" title="props的使用"></a>props的使用</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;p in list&quot; :key=&quot;p.id&quot;&gt;</span><br><span class="line">        &#123;% raw %&#125;&#123;&#123;p.name&#125;&#125;&#123;% endraw %&#125; -- &#123;% raw %&#125;&#123;&#123;p.age&#125;&#125;&#123;% endraw %&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;withDefaults&#125; from &#x27;vue&#x27;</span><br><span class="line">  import &#123;type Persons&#125; from &#x27;@/types&#x27;</span><br><span class="line"></span><br><span class="line">  // 只接收list</span><br><span class="line">  // defineProps([&#x27;list&#x27;])</span><br><span class="line"></span><br><span class="line">  // 接收list + 限制类型</span><br><span class="line">  // defineProps&lt;&#123;list:Persons&#125;&gt;()</span><br><span class="line"></span><br><span class="line">  //  接收list + 限制类型 + 限制必要性 + 指定默认值</span><br><span class="line">  withDefaults(defineProps&lt;&#123;list?:Persons&#125;&gt;(),&#123;</span><br><span class="line">    list:()=&gt; [&#123;id:&#x27;ausydgyu01&#x27;,name:&#x27;康师傅·王麻子·特仑苏&#x27;,age:19&#125;]</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  // 接收list，同时将props保存起来</span><br><span class="line">  /* let x = defineProps([&#x27;list&#x27;])</span><br><span class="line">  console.log(x.list) */</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .person &#123;</span><br><span class="line">    background-color: skyblue;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">  button &#123;</span><br><span class="line">    margin: 0 5px;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>拆分代码：</p>
<ul>
<li><p>模版部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;p in list&quot; :key=&quot;p.id&quot;&gt;</span><br><span class="line">        &#123;% raw %&#125;&#123;&#123;p.name&#125;&#125;&#123;% endraw %&#125; -- &#123;% raw %&#125;&#123;&#123;p.age&#125;&#125;&#123;% endraw %&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>这里面含有v-for循环，那么这个是什么？</strong></p>
<ul>
<li>遍历list数据(通过props传递到组件中)</li>
<li>每个p是list数组中的一项</li>
<li>:key=&quot;p.id&quot; 为每个列表项绑定唯一的 key，提高渲染性能。</li>
</ul>
<p>​	•	{{p.name}} 和 {{p.age}} 动态展示每个对象的 name 和 age 属性。</p>
<ul>
<li><p>脚本部分</p>
<ul>
<li><p>导入工具与类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &#123; withDefaults &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; type Persons &#125; from &#x27;@/types&#x27;</span><br></pre></td></tr></table></figure>

<p>​    •    withDefaults：</p>
<p>​    •    用于为 defineProps 定义的 props 设置默认值。它接收两个参数：</p>
<p>​    •    defineProps 的返回值（包含 props 的类型约束）。</p>
<p>​    •    一个对象，用来指定每个 prop 的默认值。</p>
</li>
<li><p>那么对应的index.ts</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 定义一个接口，用于限制person对象的具体属性</span><br><span class="line">export interface PersonInter &#123;</span><br><span class="line">  id:string,</span><br><span class="line">  name:string,</span><br><span class="line">  age:number,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 一个自定义类型</span><br><span class="line">// export type Persons = Array&lt;PersonInter&gt;</span><br><span class="line">export type Persons = PersonInter[]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>clock</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://clock_blog.com/2025/01/28/vue_format_corrected_fixed/">http://clock_blog.com/2025/01/28/vue_format_corrected_fixed/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY</strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/%E5%89%8D%E7%AB%AF/"># 前端</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2025/01/28/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%EF%BC%88AJAX/">前端框架(AJAX+axios+promise)</a>
            
            
            <a class="next" rel="next" href="/2025/01/28/%E9%87%8D%E7%82%B9/">重点</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="contact-info">
        <h3>Contact Me:</h3>
        <ul>
            <strong>CSDN:</strong> <a href="https://blog.csdn.net/2401_87202881?type=blog" target="_blank">点击访问</a>
            <strong>QQ:</strong> <a target="_blank" rel="noopener" href="https://wpa.qq.com/msgrd?v=3&uin=2100892868&site=qq&menu=yes">点击联系我</a>
            <strong>Email:</strong> <a href="mailto:你的邮箱地址">2100892868@qq.com</a>
            <strong>GitHub:</strong> <a href="https://github.com/ldz3582" target="_blank">点击访问我的GitHub</a>
            <strong>WeChat:</strong> Clock_LHSC
        </ul>
    </div>
    <div class="copyright">
        <span>© clock | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>
    </div>
</body>

</html>