<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5461T457HT"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-5461T457HT');
</script>
<!-- End Google Analytics -->
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="clock">


    <meta name="subtitle" content="Here's liyuhan's personal blog">


    <meta name="description" content="Welcome!">



<title>clock&#39;s blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "Â· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "Â· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Clock&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Clock&#39;s Blog</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    <article class="post-wrap page">
        
        <h2 class="post-title"></h2>
        
        <section class="post-content">
            <table>
<thead>
<tr>
<th><strong>é™æµç­–ç•¥</strong></th>
<th><strong>åŸºç¡€ç‰ˆç”¨æˆ·</strong></th>
<th><strong>ä¸“ä¸šç‰ˆç”¨æˆ·</strong></th>
</tr>
</thead>
<tbody><tr>
<td>API æµæ§</td>
<td><a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/developer_guides/chat_v3">å‘èµ·å¯¹è¯</a> API çš„æµæ§é™åˆ¶ä¸º 10 QPSã€‚ <a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/developer_guides/workflow_run">æ‰§è¡Œå·¥ä½œæµ</a>ã€<a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/developer_guides/workflow_stream_run">æ‰§è¡Œå·¥ä½œæµï¼ˆæµå¼å“åº”ï¼‰</a>ã€<a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/developer_guides/workflow_chat">æ‰§è¡Œå¯¹è¯æµ</a> API çš„æµæ§é™åˆ¶ä¸º 100 QPSã€‚ 2024å¹´8æœˆ15æ—¥ä¹‹åï¼Œ<a target="_blank" rel="noopener" href="https://www.coze.cn/?utm_medium=&utm_source=api_doc&utm_content=landingpage&utm_id=&utm_campaign=&utm_term=&utm_source_platform=">æ‰£å­</a> API çš„å…è´¹é¢åº¦ä¸ºæ¯ä¸ªè´¦å· 100 æ¬¡ API è°ƒç”¨ã€‚ä¸€æ—¦ç´¯è®¡è°ƒç”¨æ¬¡æ•°è¶…è¿‡å…è´¹é¢åº¦ï¼Œæ­¤è´¦å·å°†æ— æ³•ç»§ç»­ä½¿ç”¨ä»»ä½•<a target="_blank" rel="noopener" href="https://www.coze.cn/?utm_medium=&utm_source=api_doc&utm_content=landingpage&utm_id=&utm_campaign=&utm_term=&utm_source_platform=">æ‰£å­</a> APIã€‚API å…è´¹é¢åº¦ä¸é€‚ç”¨äºé€šè¿‡<a target="_blank" rel="noopener" href="https://www.coze.cn/?utm_medium=&utm_source=api_doc&utm_content=landingpage&utm_id=&utm_campaign=&utm_term=&utm_source_platform=">æ‰£å­</a>å¹³å°ã€å…¶ä»–å‘å¸ƒæ¸ é“æˆ– SDK äº§ç”Ÿçš„è¯·æ±‚ã€‚</td>
<td><a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/developer_guides/chat_v3">å‘èµ·å¯¹è¯</a> API çš„æµæ§é™åˆ¶ä¸º 50 QPSã€‚ <a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/developer_guides/workflow_run">æ‰§è¡Œå·¥ä½œæµ</a>ã€<a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/developer_guides/workflow_stream_run">æ‰§è¡Œå·¥ä½œæµï¼ˆæµå¼å“åº”ï¼‰</a>ã€<a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/developer_guides/workflow_chat">æ‰§è¡Œå¯¹è¯æµ</a> API çš„æµæ§é™åˆ¶ä¸º 100 QPSã€‚</td>
</tr>
<tr>
<td>æ¨¡å‹æµæ§</td>
<td>åŸºç¡€ç‰ˆç”¨æˆ·è°ƒç”¨<a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/developer_guides/chat_v3">å‘èµ·å¯¹è¯</a>ã€<a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/developer_guides/workflow_run">æ‰§è¡Œå·¥ä½œæµ</a>ã€<a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/developer_guides/workflow_stream_run">æ‰§è¡Œå·¥ä½œæµï¼ˆæµå¼å“åº”ï¼‰</a>ã€<a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/developer_guides/workflow_chat">æ‰§è¡Œå¯¹è¯æµ</a>ç­‰æ¶‰åŠæ¨¡å‹å¤„ç†çš„ API æ—¶ï¼Œæ¯ä¸ªç”¨æˆ·ä½¿ç”¨æ¨¡å‹çš„é¢‘ç‡å—é™ã€‚ æ¨¡å‹çš„æµæ§é™åˆ¶ä¸ºï¼š QPSï¼š2 QPMï¼š60 QPDï¼š3000</td>
<td>ä¸“ä¸šç‰ˆæ¨¡å‹çš„æµæ§é™åˆ¶å–å†³äºç«å±±æ–¹èˆŸå¹³å°ä¸­è®¾ç½®çš„ RPMï¼Œæœ€å¤§å¯è®¾ç½®ä¸º 12000ã€‚ è®¾ç½®æ–¹å¼å¯å‚è€ƒ<a target="_blank" rel="noopener" href="https://www.coze.cn/open/docs/coze_pro/access_model">ä¸ºæ‰£å­ä¸“ä¸šç‰ˆæ¥å…¥æ¨¡å‹</a>ã€‚ å¦‚éœ€æé«˜é¢‘æ§ï¼Œå¯é€šè¿‡<a target="_blank" rel="noopener" href="https://console.volcengine.com/workorder/create?step=2&SubProductID=P00001396">å·¥å•å¹³å°</a>æ²Ÿé€šéœ€æ±‚ã€‚</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">curl --location --request POST &#x27;https://api.coze.cn/v3/chat&#x27; \</span><br><span class="line">--header &#x27;Authorization: Bearer pat_gzkriBzO9kkigwPmWRCzKEVvCYVY4HUa216xAwsI3pCYYBmgEVfWvvOqJLR8SQzy&#x27; \</span><br><span class="line">--header &#x27;Content-Type: application/json&#x27; \</span><br><span class="line">--data-raw &#x27;&#123;</span><br><span class="line">    &quot;bot_id&quot;: &quot;7468872817791565863&quot;,</span><br><span class="line">    &quot;user_id&quot;: &quot;user_123456&quot;,</span><br><span class="line">    &quot;stream&quot;: true,</span><br><span class="line">    &quot;auto_save_history&quot;: true,</span><br><span class="line">    &quot;additional_messages&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;role&quot;: &quot;user&quot;,</span><br><span class="line">            &quot;content&quot;: &quot;æ—©ä¸Šå¥½&quot;,</span><br><span class="line">            &quot;content_type&quot;: &quot;text&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªè¯·æ±‚å·²ç»æˆåŠŸå‘é€ï¼Œå¹¶ä¸”æœåŠ¡å™¨è¿”å›äº†ä¸€ä¸ª <strong>æ­£åœ¨å¤„ç†ï¼ˆin_progressï¼‰</strong> çš„å“åº”ï¼Œè¯´æ˜ API è¯·æ±‚æ˜¯æœ‰æ•ˆçš„ã€‚ğŸ‰</p>
<p> <strong>å®æ—¶è¿”å› AI å›å¤</strong>ï¼Œå¯ä»¥å°† stream è®¾ç½®ä¸º true</p>
<p><img src="/Users/liyuhan/Downloads/Hexo/source/images/image-20250208150338259.png" alt="image-20250208150338259"></p>
<p>æºä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;chat-container&quot;&gt;</span><br><span class="line">    &lt;!-- é¡¶éƒ¨æ ‡é¢˜ --&gt;</span><br><span class="line">    &lt;header class=&quot;chat-header&quot;&gt;Chat with AI&lt;/header&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æ¶ˆæ¯åŒºåŸŸ --&gt;</span><br><span class="line">    &lt;div class=&quot;chat-messages&quot; ref=&quot;chatMessages&quot;&gt;</span><br><span class="line">      &lt;div v-for=&quot;(msg, index) in messages&quot; :key=&quot;index&quot;</span><br><span class="line">           :class=&quot;&#123;&#x27;user-message&#x27;: msg.type === &#x27;user&#x27;, &#x27;ai-message&#x27;: msg.type === &#x27;ai&#x27;&#125;&quot;&gt;</span><br><span class="line">        &#123;&#123; msg.text &#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- è¾“å…¥æ¡† --&gt;</span><br><span class="line">    &lt;div class=&quot;chat-input&quot;&gt;</span><br><span class="line">      &lt;input v-model=&quot;userInput&quot; @keyup.enter=&quot;sendMessage&quot; placeholder=&quot;Type your message...&quot; /&gt;</span><br><span class="line">      &lt;button @click=&quot;sendMessage&quot;&gt;Send&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      userInput: &quot;&quot;, // ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯</span><br><span class="line">      messages: [&#123; text: &quot;Hello! How can I assist you?&quot;, type: &quot;ai&quot; &#125;], // åˆå§‹AIæ¶ˆæ¯</span><br><span class="line">      isSending: false, // é˜²æ­¢é‡å¤å‘é€</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // å‘é€æ¶ˆæ¯åˆ°API</span><br><span class="line">    async sendMessage() &#123;</span><br><span class="line">      if (!this.userInput.trim() || this.isSending) return;</span><br><span class="line"></span><br><span class="line">      // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯</span><br><span class="line">      this.messages.push(&#123; text: this.userInput, type: &quot;user&quot; &#125;);</span><br><span class="line"></span><br><span class="line">      const userMessage = this.userInput;</span><br><span class="line">      this.userInput = &quot;&quot;;</span><br><span class="line">      this.isSending = true;</span><br><span class="line">      try &#123;</span><br><span class="line">        // è°ƒç”¨APIï¼Œè·å–AIå›å¤</span><br><span class="line">        const response = await fetch(&quot;https://api.coze.cn/v3/chat&quot;, &#123;</span><br><span class="line">          method: &quot;POST&quot;,</span><br><span class="line">          headers: &#123;</span><br><span class="line">            Authorization: `Bearer pat_gzkriBzO9kkigwPmWRCzKEVvCYVY4HUa216xAwsI3pCYYBmgEVfWvvOqJLR8SQzy`, // ä½¿ç”¨æœ‰æ•ˆçš„ API Token</span><br><span class="line">            &quot;Content-Type&quot;: &quot;application/json&quot;,</span><br><span class="line">          &#125;,</span><br><span class="line">          body: JSON.stringify(&#123;</span><br><span class="line">            bot_id: &quot;7468872817791565863&quot;, // ç¡®ä¿å¡«å†™æœ‰æ•ˆçš„ bot ID</span><br><span class="line">            &quot;user_id&quot;: &quot;user_123456&quot;,</span><br><span class="line">            messages: [&#123; role: &quot;user&quot;, content: userMessage &#125;],</span><br><span class="line">          &#125;),</span><br><span class="line">        &#125;);</span><br><span class="line">        const data = await response.json();</span><br><span class="line">        console.log(&quot;API Response:&quot;, data); // æ‰“å° API è¿”å›çš„æ•°æ®</span><br><span class="line"></span><br><span class="line">        // å¦‚æœ API è¯·æ±‚æˆåŠŸå¹¶è¿”å›å†…å®¹</span><br><span class="line">        if (data.choices &amp;&amp; data.choices.length &gt; 0) &#123;</span><br><span class="line">          const aiResponse = data.choices[0].message.content || &quot;AI æ²¡æœ‰è¿”å›æœ‰æ•ˆæ¶ˆæ¯&quot;;</span><br><span class="line">          this.messages.push(&#123; text: aiResponse, type: &quot;ai&quot; &#125;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          this.messages.push(&#123; text: &quot;AI æ²¡æœ‰è¿”å›æœ‰æ•ˆæ¶ˆæ¯&quot;, type: &quot;ai&quot; &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; catch (error) &#123;</span><br><span class="line">        console.error(&quot;API è¯·æ±‚å¤±è´¥:&quot;, error);</span><br><span class="line">        this.messages.push(&#123; text: &quot;AI å‘ç”Ÿé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•ã€‚&quot;, type: &quot;ai&quot; &#125;);</span><br><span class="line">      &#125; finally &#123;</span><br><span class="line">        this.isSending = false;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // è®©æ¶ˆæ¯åŒºåŸŸæ»šåŠ¨åˆ°åº•éƒ¨</span><br><span class="line">      this.$nextTick(() =&gt; this.scrollToBottom());</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯</span><br><span class="line">    scrollToBottom() &#123;</span><br><span class="line">      if (this.$refs.chatMessages) &#123;</span><br><span class="line">        this.$refs.chatMessages.scrollTop = this.$refs.chatMessages.scrollHeight;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">/* æ•´ä½“å¸ƒå±€ */</span><br><span class="line">.chat-container &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  width: 90vw;</span><br><span class="line">  max-width: 1200px;</span><br><span class="line">  height: 80vh;</span><br><span class="line">  margin: 5vh auto;</span><br><span class="line">  background: #f8f8f8;</span><br><span class="line">  border-radius: 10px;</span><br><span class="line">  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* å¤´éƒ¨æ ·å¼ */</span><br><span class="line">.chat-header &#123;</span><br><span class="line">  background: #4a90e2;</span><br><span class="line">  color: white;</span><br><span class="line">  text-align: center;</span><br><span class="line">  padding: 15px;</span><br><span class="line">  font-size: 1.5rem;</span><br><span class="line">  border-radius: 10px 10px 0 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* æ¶ˆæ¯åˆ—è¡¨ */</span><br><span class="line">.chat-messages &#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  overflow-y: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* æ¶ˆæ¯æ°”æ³¡ */</span><br><span class="line">.user-message &#123;</span><br><span class="line">  background: #d1e8ff;</span><br><span class="line">  padding: 10px;</span><br><span class="line">  border-radius: 10px;</span><br><span class="line">  max-width: 70%;</span><br><span class="line">  margin: 10px 0;</span><br><span class="line">  align-self: flex-end;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.ai-message &#123;</span><br><span class="line">  background: #e0e0e0;</span><br><span class="line">  padding: 10px;</span><br><span class="line">  border-radius: 10px;</span><br><span class="line">  max-width: 70%;</span><br><span class="line">  margin: 10px 0;</span><br><span class="line">  align-self: flex-start;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* è¾“å…¥æ¡† */</span><br><span class="line">.chat-input &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  padding: 15px;</span><br><span class="line">  background: white;</span><br><span class="line">  border-radius: 0 0 10px 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.chat-input input &#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">  padding: 10px;</span><br><span class="line">  border: 1px solid #ddd;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.chat-input button &#123;</span><br><span class="line">  margin-left: 10px;</span><br><span class="line">  padding: 10px;</span><br><span class="line">  background: #4a90e2;</span><br><span class="line">  color: white;</span><br><span class="line">  border: none;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;chat-container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;messages&quot;&gt;</span><br><span class="line">      &lt;div v-for=&quot;(msg, index) in messages&quot; :key=&quot;index&quot; :class=&quot;msg.role&quot;&gt;</span><br><span class="line">        &#123;&#123; msg.content &#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;input v-model=&quot;userInput&quot; placeholder=&quot;è¾“å…¥ä½ çš„é—®é¢˜...&quot; @keyup.enter=&quot;sendMessage&quot;&gt;</span><br><span class="line">    &lt;button @click=&quot;sendMessage&quot;&gt;å‘é€&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      userInput: &quot;&quot;,  // ç”¨æˆ·è¾“å…¥</span><br><span class="line">      messages: []  // å­˜å‚¨èŠå¤©è®°å½•</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async sendMessage() &#123;</span><br><span class="line">      if (!this.userInput.trim()) return;</span><br><span class="line">      </span><br><span class="line">      // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯</span><br><span class="line">      this.messages.push(&#123; role: &quot;user&quot;, content: this.userInput &#125;);</span><br><span class="line"></span><br><span class="line">      const botId = &quot;7468872817791565863&quot;;</span><br><span class="line">      const token = &quot;Bearer pat_gzkriBzO9kkigwPmWRCzKEVvCYVY4HUa216xAwsI3pCYYBmgEVfWvvOqJLR8SQzy&quot;;</span><br><span class="line">      </span><br><span class="line">      // æ¸…ç©ºè¾“å…¥æ¡†</span><br><span class="line">      let userMessage = this.userInput;</span><br><span class="line">      this.userInput = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">      try &#123;</span><br><span class="line">        const eventSource = new EventSource(`https://api.coze.cn/v3/chat?bot_id=$&#123;botId&#125;&amp;user_id=user_123456&amp;stream=true`, &#123;</span><br><span class="line">          headers: &#123;</span><br><span class="line">            &quot;Authorization&quot;: token,</span><br><span class="line">            &quot;Content-Type&quot;: &quot;application/json&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        let botMessage = &#123; role: &quot;assistant&quot;, content: &quot;&quot; &#125;;</span><br><span class="line">        this.messages.push(botMessage); // å…ˆæ’å…¥ä¸€ä¸ªç©ºçš„ AI å›å¤</span><br><span class="line">        </span><br><span class="line">        eventSource.onmessage = (event) =&gt; &#123;</span><br><span class="line">          let data = JSON.parse(event.data);</span><br><span class="line">          if (data.type === &quot;answer&quot;) &#123;</span><br><span class="line">            botMessage.content += data.content;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        eventSource.onerror = () =&gt; &#123;</span><br><span class="line">          console.error(&quot;SSE è¿æ¥é”™è¯¯&quot;);</span><br><span class="line">          eventSource.close();</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">      &#125; catch (error) &#123;</span><br><span class="line">        console.error(&quot;è¯·æ±‚å¤±è´¥&quot;, error);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.chat-container &#123;</span><br><span class="line">  max-width: 600px;</span><br><span class="line">  margin: auto;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  border: 1px solid #ddd;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">&#125;</span><br><span class="line">.messages &#123;</span><br><span class="line">  height: 300px;</span><br><span class="line">  overflow-y: auto;</span><br><span class="line">  border-bottom: 1px solid #ddd;</span><br><span class="line">  padding: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.user &#123;</span><br><span class="line">  text-align: right;</span><br><span class="line">  color: blue;</span><br><span class="line">&#125;</span><br><span class="line">.assistant &#123;</span><br><span class="line">  text-align: left;</span><br><span class="line">  color: green;</span><br><span class="line">&#125;</span><br><span class="line">input &#123;</span><br><span class="line">  width: 80%;</span><br><span class="line">  padding: 10px;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line">button &#123;</span><br><span class="line">  padding: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="å…ˆå‘å¸ƒæ™ºèƒ½ä½“"><a href="#å…ˆå‘å¸ƒæ™ºèƒ½ä½“" class="headerlink" title="å…ˆå‘å¸ƒæ™ºèƒ½ä½“"></a><strong>å…ˆå‘å¸ƒæ™ºèƒ½ä½“</strong></h2><p>ä½ ä¸éœ€è¦ <strong>å…¨éƒ¨ API</strong>ï¼Œåªéœ€è¦ <strong>æ ¸å¿ƒ API</strong>ï¼š</p>
<p>â€‹	1.	<strong>å‘å¸ƒæ™ºèƒ½ä½“ &#x2F;v1&#x2F;bot&#x2F;publish</strong></p>
<p>â€‹	2.	<strong>åˆ›å»ºä¼šè¯ &#x2F;v1&#x2F;conversation&#x2F;create</strong></p>
<p>â€‹	3.	<strong>å‘é€æ¶ˆæ¯ &#x2F;v3&#x2F;chat</strong></p>
<p>â€‹	4.	<strong>è·å–å†å²è®°å½• &#x2F;v1&#x2F;conversation&#x2F;{conversation_id}&#x2F;messages</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">curl --location --request POST &#x27;https://api.coze.cn/v1/bot/publish&#x27; \</span><br><span class="line">--header &#x27;Authorization: Bearer pat_gzkriBzO9kkigwPmWRCzKEVvCYVY4HUa216xAwsI3pCYYBmgEVfWvvOqJLR8SQzy&#x27; \</span><br><span class="line">--header &#x27;Content-Type: application/json&#x27; \</span><br><span class="line">--data &#x27;&#123;</span><br><span class="line">    &quot;bot_id&quot;: &quot;7468872817791565863&quot;,</span><br><span class="line">    &quot;connector_ids&quot;: [&quot;1024&quot;],</span><br><span class="line">    &quot;description&quot;: &quot;å‘å¸ƒæˆ‘çš„ AI æœºå™¨äºº&quot;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>è¿”å›ç»“æœ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;code&quot;:0,&quot;msg&quot;:&quot;&quot;,&quot;data&quot;:&#123;&quot;bot_id&quot;:&quot;7468872817791565863&quot;,&quot;version&quot;:&quot;1739001712363&quot;&#125;&#125;%                                                                  liyuhan@liyuhandebijibendiannao ~ % </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºä¼šè¯"><a href="#åˆ›å»ºä¼šè¯" class="headerlink" title="åˆ›å»ºä¼šè¯"></a>åˆ›å»ºä¼šè¯</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl --location --request POST &#x27;https://api.coze.cn/v1/conversation/create&#x27; \</span><br><span class="line">--header &#x27;Authorization: Bearer pat_gzkriBzO9kkigwPmWRCzKEVvCYVY4HUa216xAwsI3pCYYBmgEVfWvvOqJLR8SQzy&#x27; \</span><br><span class="line">--header &#x27;Content-Type: application/json&#x27; \</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;code&quot;: 0,</span><br><span class="line">  &quot;data&quot;: &#123;</span><br><span class="line">    &quot;created_at&quot;: 1739003475,</span><br><span class="line">    &quot;id&quot;: &quot;7468963045729959976&quot;,  // è¿™æ˜¯æ–°çš„ conversation_id</span><br><span class="line">    &quot;last_section_id&quot;: &quot;7468963045729959976&quot;,  // æœ€åä¸€ä¸ªä¼šè¯æ®µçš„ ID</span><br><span class="line">    &quot;meta_data&quot;: &#123;&#125;  // å…¶ä»–å…ƒæ•°æ®</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;msg&quot;: &quot;&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€œidâ€: â€œ7468963045729959976â€, &#x2F;&#x2F; è¿™æ˜¯ä½ çš„ conversation_id</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl --location --request GET &#x27;https://api.coze.cn/v1/conversation/retrieve?conversation_id=7468963045729959976&#x27; \</span><br><span class="line">--header &#x27;Authorization: Bearer pat_gzkriBzO9kkigwPmWRCzKEVvCYVY4HUa216xAwsI3pCYYBmgEVfWvvOqJLR8SQzy&#x27; \</span><br><span class="line">--header &#x27;Content-Type: application/json&#x27;</span><br></pre></td></tr></table></figure>



<h2 id="å·¥ä½œæµ"><a href="#å·¥ä½œæµ" class="headerlink" title="å·¥ä½œæµ"></a>å·¥ä½œæµ</h2><p><a target="_blank" rel="noopener" href="https://www.coze.cn/work_flow?space_id=7468627348678705178&workflow_id=7468972466682937363">https://www.coze.cn/work_flow?space_id=7468627348678705178&amp;workflow_id=7468972466682937363</a></p>
<p><img src="/Users/liyuhan/Downloads/Hexo/source/images/image-20250208170835769.png" alt="image-20250208170835769"></p>
<p><img src="/Users/liyuhan/Downloads/Hexo/source/images/image-20250208171308533.png" alt="image-20250208171308533"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST &#x27;https://api.coze.cn/v1/workflow/run&#x27; \</span><br><span class="line">-H &quot;Authorization: Bearer pat_gzkriBzO9kkigwPmWRCzKEVvCYVY4HUa216xAwsI3pCYYBmgEVfWvvOqJLR8SQzy&quot; \</span><br><span class="line">-H &quot;Content-Type: application/json&quot; \</span><br><span class="line">-d &#x27;&#123;</span><br><span class="line">  &quot;parameters&quot;: &#123;</span><br><span class="line">    &quot;article_url&quot;: &quot;https://acm.sdut.edu.cn/onlinejudge3/&quot;,</span><br><span class="line">    &quot;user_id&quot;: &quot;user_123456&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;workflow_id&quot;: &quot;7469002841937838114&quot;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p><img src="/Users/liyuhan/Downloads/Hexo/source/images/image-20250208194944308.png" alt="image-20250208194944308"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST &#x27;https://api.coze.cn/v1/workflow/run&#x27; \</span><br><span class="line">-H &quot;Authorization: Bearer pat_gzkriBzO9kkigwPmWRCzKEVvCYVY4HUa216xAwsI3pCYYBmgEVfWvvOqJLR8SQzy&quot; \</span><br><span class="line">-H &quot;Content-Type: application/json&quot; \</span><br><span class="line">-d &#x27;&#123;</span><br><span class="line">    &quot;workflow_id&quot;: &quot;7469002841937838114&quot;,</span><br><span class="line">    &quot;parameters&quot;: &#123;</span><br><span class="line">        &quot;article_url&quot;: &quot;https://acm.sdut.edu.cn/onlinejudge3/&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>7469082946461499392</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;chat-container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;messages&quot;&gt;</span><br><span class="line">        &lt;div v-for=&quot;(message, index) in messages&quot; :key=&quot;index&quot; :class=&quot;message.type&quot;&gt;</span><br><span class="line">          &lt;p&gt;&#123;&#123; message.text &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div class=&quot;input-container&quot;&gt;</span><br><span class="line">        &lt;input v-model=&quot;userInput&quot; @keyup.enter=&quot;sendMessage&quot; placeholder=&quot;è¯·è¾“å…¥æ¶ˆæ¯...&quot; /&gt;</span><br><span class="line">        &lt;button @click=&quot;sendMessage&quot;&gt;å‘é€&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt; </span><br><span class="line">&lt;!--æ¨¡ç‰ˆéƒ¨åˆ†ï¼Œæ¶ˆæ¯å±•ç¤ºåŒºåŸŸï¼Œæ˜¾ç¤ºç”¨æˆ·ä¸AIèŠå¤©è®°å½•ï¼Œè¿™é‡Œä½¿ç”¨v-forå¾ªç¯éå†messagesæ•°ç»„ï¼Œè¿›è€Œæ¸²æŸ“æ¯ä¸€æ¡æ¶ˆæ¯--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      userInput: &#x27;&#x27;,</span><br><span class="line">      messages: [],</span><br><span class="line">      conversationId: null,</span><br><span class="line">      api_token: &#x27;Bearer pat_gzkriBzO9kkigwPmWRCzKEVvCYVY4HUa216xAwsI3pCYYBmgEVfWvvOqJLR8SQzy&#x27; // è¿™é‡Œæ›¿æ¢ä¸ºä½ çš„ API token</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async sendMessage() &#123;</span><br><span class="line">      if (!this.userInput.trim()) return; // å¦‚æœè¾“å…¥ä¸ºç©ºåˆ™ä¸å‘é€æ¶ˆæ¯</span><br><span class="line"></span><br><span class="line">      // 1. åˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨ä¼šè¯,å‚è€ƒæ–‡æ¡£åˆ›å»ºæ¶ˆæ¯</span><br><span class="line">      if (!this.conversationId) &#123;</span><br><span class="line">        const response = await (await fetch(&#x27;https://api.coze.cn/v1/conversation/create&#x27;, &#123;</span><br><span class="line">          method: &#x27;POST&#x27;,</span><br><span class="line">          headers: &#123;</span><br><span class="line">            Authorization: this.api_token,</span><br><span class="line">            &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)).json();</span><br><span class="line">        this.conversationId = response.data.id;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // 2. å‘é€ç”¨æˆ·æ¶ˆæ¯ç»™AIï¼Œå‚è€ƒå‘èµ·å¯¹è¯</span><br><span class="line">      let response = await (await fetch(`https://api.coze.cn/v3/chat?conversation_id=$&#123;this.conversationId&#125;`, &#123;</span><br><span class="line">        method: &#x27;POST&#x27;,</span><br><span class="line">        headers: &#123;</span><br><span class="line">          Authorization: this.api_token,</span><br><span class="line">          &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,</span><br><span class="line">        &#125;,</span><br><span class="line">        body: JSON.stringify(&#123;</span><br><span class="line">          bot_id: &#x27;7468872817791565863&#x27;, // AI botçš„ID</span><br><span class="line">          user_id: &#x27;1&#x27;,</span><br><span class="line">          additional_messages: [&#123;</span><br><span class="line">            role: &#x27;user&#x27;,</span><br><span class="line">            content_type: &#x27;text&#x27;,</span><br><span class="line">            content: this.userInput,</span><br><span class="line">          &#125;],</span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;)).json();</span><br><span class="line"></span><br><span class="line">      // è·å–èŠå¤©çš„ID</span><br><span class="line">      const chatId = response.data.id;</span><br><span class="line"></span><br><span class="line">      // å°†ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯æ”¾å…¥æ¶ˆæ¯è®°å½•</span><br><span class="line">      this.messages.push(&#123; text: this.userInput, type: &#x27;user&#x27; &#125;);</span><br><span class="line"></span><br><span class="line">      // æ¸…ç©ºç”¨æˆ·è¾“å…¥æ¡†</span><br><span class="line">      this.userInput = &#x27;&#x27;;</span><br><span class="line"></span><br><span class="line">      // 3. æ¯éš”1ç§’æŸ¥è¯¢AIæ˜¯å¦å·²ç»å¤„ç†å®Œç”¨æˆ·æ¶ˆæ¯</span><br><span class="line">      const timer = setInterval(async () =&gt; &#123;</span><br><span class="line">        response = await (await fetch(`https://api.coze.cn/v3/chat/retrieve?conversation_id=$&#123;this.conversationId&#125;&amp;chat_id=$&#123;chatId&#125;`, &#123;</span><br><span class="line">          method: &#x27;GET&#x27;,</span><br><span class="line">          headers: &#123;</span><br><span class="line">            Authorization: this.api_token,</span><br><span class="line">            &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)).json();</span><br><span class="line"></span><br><span class="line">        // å¦‚æœæ¶ˆæ¯å¤„ç†æœªå®Œæˆï¼Œç»§ç»­ç­‰å¾…</span><br><span class="line">        if (response.data.status !== &#x27;completed&#x27;) &#123;</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // æ¸…é™¤å®šæ—¶å™¨</span><br><span class="line">        clearInterval(timer);</span><br><span class="line"></span><br><span class="line">        // è·å–AIçš„å›ç­”</span><br><span class="line">        response = await (await fetch(`https://api.coze.cn/v3/chat/message/list?conversation_id=$&#123;this.conversationId&#125;&amp;chat_id=$&#123;chatId&#125;`, &#123;</span><br><span class="line">          method: &#x27;GET&#x27;,</span><br><span class="line">          headers: &#123;</span><br><span class="line">            Authorization: this.api_token,</span><br><span class="line">            &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)).json();</span><br><span class="line"></span><br><span class="line">        // å°†AIçš„æ¶ˆæ¯æ”¾å…¥æ¶ˆæ¯è®°å½•</span><br><span class="line">        response.data.forEach((msg) =&gt; &#123;</span><br><span class="line">          if (msg.type !== &#x27;answer&#x27;) return; // åªæ˜¾ç¤ºå›ç­”ç±»å‹çš„æ¶ˆæ¯</span><br><span class="line">          this.messages.push(&#123; text: msg.content, type: &#x27;ai&#x27;, msgId: msg.id &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;, 1000);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#app &#123;</span><br><span class="line">  font-family: Arial, sans-serif;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">  height: 100vh;</span><br><span class="line">  background-color: #f4f4f4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.chat-container &#123;</span><br><span class="line">  width: 400px;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  border-radius: 8px;</span><br><span class="line">  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);</span><br><span class="line">  padding: 20px;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  height: 500px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.messages &#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">  overflow-y: auto;</span><br><span class="line">  margin-bottom: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.messages .user &#123;</span><br><span class="line">  text-align: right;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.messages .ai &#123;</span><br><span class="line">  text-align: left;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.input-container &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.input-container input &#123;</span><br><span class="line">  width: 80%;</span><br><span class="line">  padding: 8px;</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.input-container button &#123;</span><br><span class="line">  width: 15%;</span><br><span class="line">  padding: 8px;</span><br><span class="line">  background-color: #4CAF50;</span><br><span class="line">  color: white;</span><br><span class="line">  border: none;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.input-container button:hover &#123;</span><br><span class="line">  background-color: #45a049;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>


        </section>
    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="contact-info">
        <h3>Contact Me:</h3>
        <ul>
            <strong>CSDN:</strong> <a href="https://blog.csdn.net/2401_87202881?type=blog" target="_blank">ç‚¹å‡»è®¿é—®</a>
            <strong>QQ:</strong> <a target="_blank" rel="noopener" href="https://wpa.qq.com/msgrd?v=3&uin=2100892868&site=qq&menu=yes">ç‚¹å‡»è”ç³»æˆ‘</a>
            <strong>Email:</strong> <a href="mailto:ä½ çš„é‚®ç®±åœ°å€">2100892868@qq.com</a>
            <strong>GitHub:</strong> <a href="https://github.com/ldz3582" target="_blank">ç‚¹å‡»è®¿é—®æˆ‘çš„GitHub</a>
            <strong>WeChat:</strong> Clock_LHSC
        </ul>
    </div>
    <div class="copyright">
        <span>Â© clock | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>
    </div>
</body>

</html>